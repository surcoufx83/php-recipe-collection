    <template id="recipe-write-template">
      <b-container>

        <b-form
          @submit="onSubmit"
          class="needs-validation"
          autocomplete="off" novalidate
          enctype="multipart/form-data"
          id="new-recipe-form">

          <b-row><!-- header title + description -->
            <b-col cols="12">
              <h4>{{ Controller.l('newRecipe_intro_header') }}</h4>
              <p>{{ Controller.l('newRecipe_intro_subject')|raw }}</p>
              <p>{{ Controller.l('newRecipe_intro_requiredFields')|raw }}</p>
            </b-col>
          </b-row><!-- header title + description -->

          <b-row class="mt-3" align-h="between"><!-- heading common data + pictures -->
            <b-col cols="12" lg="5">
              <h5>{{ Controller.l('newRecipe_chapter1_header') }}</h5>
            </b-col>
            <b-col cols="12" lg="6" class="d-none d-lg-block">
              <h5>{{ Controller.l('newRecipe_chapter3_header') }}</h5>
            </b-col>
          </b-row><!-- heading common data + pictures -->

          <b-row align-h="between" class="mt-2"><!-- form common data + pictures -->

            <b-col cols="12" lg="5"><!-- form common data -->

              <b-form-row><!-- form recipe name -->
                <b-form-group
                  id="recipe-name-group"
                  label-for="recipe-name-input"
                  description="{{ Controller.l('newRecipe_chapter1_recipeNameDescription') }}"
                  invalid-feedback="{{ Controller.l('newRecipe_chapter1_recipeNameInvalidFb') }}"
                  class="px-1 w-100">
                  <template v-slot:label>
                    <b>{{ Controller.l('newRecipe_chapter1_recipeName') }} <span class='text-contrast'>*</span></b>
                  </template>
                  <b-form-input
                    id="recipe-name-input"
                    name="recipe-name"
                    size="sm" class="mt-2"
                    v-model="title"
                    placeholder="{{ Controller.l('newRecipe_chapter1_recipeNamePlaceholder') }}"
                    required trim>
                  </b-form-input>
                </b-form-group>
              </b-form-row><!-- form recipe name -->

              <b-form-row><!-- form recipe description -->
                <b-form-group
                  id="recipe-description-group"
                  label-for="recipe-description-input"
                  description="{{ Controller.l('newRecipe_chapter1_recipeDescDescription') }}"
                  class="px-1 w-100">
                  <template v-slot:label>
                    <b>{{ Controller.l('newRecipe_chapter1_recipeDesc') }}</b>
                  </template>
                  <b-form-textarea
                    id="recipe-description-input"
                    name="recipe-description"
                    size="sm" class="mt-2"
                    v-model="description"
                    rows="3" max-rows="10"
                    placeholder="{{ Controller.l('newRecipe_chapter1_recipeDescPlaceholder') }}"
                    trim>
                  </b-form-textarea>
                </b-form-group>
              </b-form-row><!-- form recipe description -->

              <b-form-row><!-- form recipe eater -->
                <b-form-group
                  id="recipe-eater-group"
                  label-for="recipe-eater-input"
                  description="{{ Controller.l('newRecipe_chapter1_recipeEaterDescription') }}"
                  invalid-feedback="{{ Controller.l('newRecipe_chapter1_recipeEaterInvalidFb') }}"
                  class="px-1 w-100">
                  <template v-slot:label>
                    <b>{{ Controller.l('newRecipe_chapter1_recipeEater') }} <span class='text-contrast'>*</span></b>
                  </template>
                  <b-form-input
                    id="recipe-eater-input"
                    name="recipe-eater"
                    size="sm" class="mt-2"
                    v-model="eater"
                    type="number" min="1" max="100"
                    :class="'w-75px'"
                    required>
                  </b-form-input>
                </b-form-group>
              </b-form-row><!-- form recipe eater -->

            </b-col><!-- form common data -->

            <b-col cols="12" lg="6"><!-- form pictures -->

              <b-row class="d-block d-lg-none row mt-3"><!-- form pictures sm title -->
                <b-col cols="12">
                  <h5>{{ Controller.l('newRecipe_chapter3_header') }}</h5>
                </b-col>
              </b-row><!-- form pictures sm title -->

              <b-form-row>
                <b-form-group
                  id="recipe-pictures-group"
                  description="{{ Controller.l('newRecipe_chapter3_recipePicturesDescription') }}"
                  class="px-1 w-100">
                  <template v-slot:label>
                    <b>{{ Controller.l('newRecipe_chapter3_recipePictures') }}</b>
                  </template>
                  <b-row cols="2" cols-lg="3"
                    class="bg-light-muted rounded image-upload-container p-0 w-100 mt-2">
                    <b-col
                      v-for="(picture, index) in pictures"
                      class="image-upload-item card h-200px card p-0">
                      <b-img src="/pictures/placeholder-dot1px.png"
                        class="card-img-top image-upload-picture"
                        style="object-fit: cover; height:163px!important;"></b-img>
                      <b-container class="card-body p-0">
                        <btn-sm-blue
                          :title="picture.file === null ? '{{ Controller.l('newRecipe_chapter3_recipePicturesUpload')|raw }}' : '{{ Controller.l('newRecipe_chapter3_recipePicturesRemove')|raw }}'"
                          class="h-100 w-100 rounded-top-0 image-upload-btn"
                          :id="'picture-' + index"
                          :for="'file-' + index"
                          @click="onPictureUploadBtnClick(index)"></btn-sm-blue>
                        <b-form-file
                          v-model="picture.file"
                          :id="'file-' + index"
                          accept="image/jpeg, image/png"
                          class="image-upload-input" style="width: 0px; height: 0px; overflow: hidden;"
                          @change="onPictureUploaded(index)"></b-form-file>
                      </b-container>
                      <span>${ picture.file ? picture.file.name : '' }</span>
                    </b-col>
                  </b-row>
                </b-form-group>
                <div class="col-12 row row-cols-2 row-cols-lg-3 bg-light-muted rounded image-upload-container p-0" id="image-upload-container">
                  <div class="d-none image-upload-item card h-200px" data-index="d" id="image-upload-dummy">
                    <img src="/pictures/placeholder-dot1px.png" class="card-img-top image-upload-picture" id="recipe-picture-d" style="object-fit: cover; height:163px!important;">
                    <div class="card-body p-0">
                      <button type="button" data-for="recipe-picture-uploader-d" data-index="d" id="image-upload-btn-dummy"
                        class="btn btn-blue btn-sm h-100 w-100 rounded-top-0 image-upload-btn">
                        <span class="span-upload">{{ Controller.l('newRecipe_chapter3_recipePicturesUpload')|raw }}</span>
                        <span class="span-delete d-none">{{ Controller.l('newRecipe_chapter3_recipePicturesRemove')|raw }}</span>
                      </button>
                      <input type="file" name="pictures[]" id="recipe-picture-uploader-d" value="Upload Photo"
                        class="image-upload-input" style="width: 0px; height: 0px; overflow: hidden;">
                    </div>
                  </div>
                </div>
              </b-form-row>

            </b-col><!-- form pictures -->

          </b-row><!-- form common data + pictures -->


          <div class="row mt-3">
            <div class="col-12 col-lg-6">
              <h5>{{ Controller.l('newRecipe_chapter2_header') }} <span class="text-contrast">*</span></h5>
              <p>{{ Controller.l('newRecipe_chapter2_description')|raw }}</p>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-12">
              <div class="list-group list-group-flush" id="ingredients-container">
                <div class="list-group-item">
                  <div class="row">
                    <div class="col-3 px-1 px-md-2 mb-2">
                      <b class="ml-1">{{ Controller.l('newRecipe_chapter2_quantity_header') }}</b><br />
                      <span class="ml-2 text-muted text-small text-nowrap">{{ Controller.l('newRecipe_chapter2_quantity_placeholder') }}</span>
                    </div>
                    <div class="col-3 px-1 px-md-2 mb-2">
                      <b class="ml-1">{{ Controller.l('newRecipe_chapter2_unit_header') }}</b><br />
                      <span class="ml-2 text-muted text-small text-nowrap">{{ Controller.l('newRecipe_chapter2_unit_placeholder') }}</span>
                    </div>
                    <div class="col-6 px-1 px-md-2">
                      <b class="ml-1">{{ Controller.l('newRecipe_chapter2_ingredient_header') }} <span class="text-contrast">*</span></b><br />
                      <span class="ml-2 text-muted text-small text-nowrap">{{ Controller.l('newRecipe_chapter2_ingredient_placeholder') }}</span>
                    </div>
                  </div>
                </div>
                <div class="list-group-item d-none" id="ingredient-dummy">
                  <div class="row" id="ingredient-d" data-index="d">
                    <div class="col-5 col-md-2 px-1 px-md-2 mb-2 mb-md-0">
                      <input type="text" class="form-control form-control-sm ingredient-quantity"
                        name="ingredient_quantity[]"
                        placeholder="{{ Controller.l('newRecipe_chapter2_quantity_header') }}">
                    </div>
                    <div class="col-5 col-md-3 px-1 px-md-2 mb-2 mb-md-0">
                      <select class="form-control form-control-sm text-small" name="ingredient_unit[]">
                        <option value="-1">{{ Controller.l('newRecipe_chapter2_unit_noUnit') }}</option>{% for Unit in Units %}
                        <option value="{{ Unit.getId() }}">{{ Unit.getName() }}</option>
                        {% endfor %}
                      </select>
                    </div>
                    <div class="col-10 col-md-6 px-1 px-md-2">
                      <input type="text" class="form-control form-control-sm ingredient-subject"
                        name="ingredient_description[]"
                        placeholder="{{ Controller.l('newRecipe_chapter2_ingredient_header') }}">
                    </div>
                    <div class="col-2 col-md-1 px-0 px-md-2">
                      <button type="button" data-for="ingredient-d" data-index="d" id="ingredient-delete-d"
                        class="btn btn-blue btn-sm w-100 ingredient-delete"
                        title="{{ Controller.l('newRecipe_chapter2_delButton_title') }}">
                        {{ Config.Icons.Delete('fa-fw')|raw }}
                      </button>
                    </div>
                  </div>
                </div>
                <div class="list-group-item">
                  <div class="row" id="ingredient-0" data-index="0">
                    <div class="col-5 col-md-2 px-1 px-md-2 mb-2 mb-md-0">
                      <input type="text" class="form-control form-control-sm" name="ingredient_quantity[]"
                        placeholder="{{ Controller.l('newRecipe_chapter2_quantity_header') }}">
                    </div>
                    <div class="col-5 col-md-3 px-1 px-md-2 mb-2 mb-md-0">
                      <select class="form-control form-select2-single form-control-sm text-small" name="ingredient_unit[]">
                        <option value="-1">{{ Controller.l('newRecipe_chapter2_unit_noUnit') }}</option>{% for Unit in Units %}
                        <option value="{{ Unit.getId() }}">{{ Unit.getName() }}</option>
                        {% endfor %}
                      </select>
                    </div>
                    <div class="col-10 col-md-6 px-1 px-md-2">
                      <input type="text" class="form-control form-control-sm" name="ingredient_description[]"
                        placeholder="{{ Controller.l('newRecipe_chapter2_ingredient_header') }}" required>
                    </div>
                  </div>
                </div>
                <div class="list-group-item">
                  <div class="row" id="ingredient-add">
                    <div class="col-2 col-lg-1 px-0 px-md-2">
                      <button type="button" id="ingredient-add-button"
                        class="btn btn-blue btn-sm w-100 ingredient-add"
                        title="{{ Controller.l('newRecipe_chapter2_addButton_title') }}">
                        {{ Config.Icons.Add('fa-fw')|raw }}
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>



          <div class="row mt-3">
            <div class="col-12 col-lg-6">
              <h5>{{ Controller.l('newRecipe_chapter4_header') }} <span class="text-contrast">*</span></h5>
              <p>{{ Controller.l('newRecipe_chapter4_description')|raw }}</p>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-12">
              <div class="list-group list-group-flush" id="steps-container">
                <div class="list-group-item d-none" id="step-dummy">
                  <div class="form-group row">
                    <label for="step-title-d" class="col-form-label-sm col-12 col-lg-3 step-title-label">
                      <b>{{ Controller.l('newRecipe_chapter4_step_title_description') }}</b>
                    </label>
                    <div class="col-12 col-lg-8">
                      <input class="form-control form-control-sm step-title-input" id="step-title-d" name="step_title[]"
                        type="text" placeholder="{{ Controller.l('newRecipe_chapter4_step_title_placeholder') }}">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label for="step-description-d" class="col-form-label-sm col-12 col-lg-3 step-desc-label">
                      <b>{{ Controller.l('newRecipe_chapter4_step_preparation_description') }}</b>
                    </label>
                    <div class="col-12 col-lg-8">
                      <textarea class="form-control form-control-sm h-100px step-description-input" id="step-description-d" name="step_description[]"
                        placeholder="{{ Controller.l('newRecipe_chapter4_step_preparation_placeholder') }}"></textarea>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-form-label-sm col-12 col-lg-3">
                      <b>{{ Controller.l('newRecipe_chapter4_step_duration_description') }}</b>
                    </label>
                    <div class="col-4 col-md-3 col-lg-2">
                      <input class="form-control form-control-sm" name="step_duration_preparation[]"
                        type="number" min="0" max="360" step="1"
                        placeholder="{{ Controller.l('newRecipe_chapter4_step_duration_preparation') }}">
                    </div>
                    <div class="col-4 col-md-3 col-lg-2">
                      <input class="form-control form-control-sm" name="step_duration_rest[]"
                        type="number" min="0" max="10080" step="1"
                        placeholder="{{ Controller.l('newRecipe_chapter4_step_duration_rest') }}">
                    </div>
                    <div class="col-4 col-md-3 col-lg-2">
                      <input class="form-control form-control-sm" name="step_duration_cooking[]"
                        type="number" min="0" max="360" step="1"
                        placeholder="{{ Controller.l('newRecipe_chapter4_step_duration_cooking') }}">
                    </div>
                  </div>
                </div>
                <div class="list-group-item">
                  <div class="form-group row">
                    <label for="step-title-0" class="col-form-label-sm col-12 col-lg-3">
                      <b>{{ Controller.l('newRecipe_chapter4_step_title_description') }}</b>
                    </label>
                    <div class="col-12 col-lg-8">
                      <input class="form-control form-control-sm" name="step_title[]" type="text"
                        placeholder="{{ Controller.l('newRecipe_chapter4_step_title_placeholder') }}">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label for="step-description-0" class="col-form-label-sm col-12 col-lg-3">
                      <b>{{ Controller.l('newRecipe_chapter4_step_preparation_description') }} <span class="text-contrast">*</span></b>
                    </label>
                    <div class="col-12 col-lg-8">
                      <textarea class="form-control form-control-sm h-100px" name="step_description[]"
                        placeholder="{{ Controller.l('newRecipe_chapter4_step_preparation_placeholder') }}" required
                        aria-describedby="step-0-invalidFeedback"></textarea>
                        <div class="invalid-feedback" id="step-0-invalidFeedback">
                          {{ Controller.l('newRecipe_chapter4_step_preparation_invalidFeedback') }}
                        </div>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-form-label-sm col-12 col-lg-3">
                      <b>{{ Controller.l('newRecipe_chapter4_step_duration_description') }}</b>
                    </label>
                    <div class="col-4 col-md-3 col-lg-2">
                      <input class="form-control form-control-sm" name="step_duration_preparation[]"
                        type="number" min="0" max="360" step="1"
                        placeholder="{{ Controller.l('newRecipe_chapter4_step_duration_preparation') }}">
                    </div>
                    <div class="col-4 col-md-3 col-lg-2">
                      <input class="form-control form-control-sm" name="step_duration_rest[]"
                        type="number" min="0" max="10080" step="1"
                        placeholder="{{ Controller.l('newRecipe_chapter4_step_duration_rest') }}">
                    </div>
                    <div class="col-4 col-md-3 col-lg-2">
                      <input class="form-control form-control-sm" name="step_duration_cooking[]"
                        type="number" min="0" max="360" step="1"
                        placeholder="{{ Controller.l('newRecipe_chapter4_step_duration_cooking') }}">
                    </div>
                  </div>
                </div>
                <div class="list-group-item">
                  <div class="row" id="step-add">
                    <div class="col-2 col-lg-1 px-0 px-md-2">
                      <button type="button" id="step-add-button"
                        class="btn btn-blue btn-sm w-100 step-add"
                        title="{{ Controller.l('newRecipe_chapter4_addButton_title') }}">
                        {{ Config.Icons.Add('fa-fw')|raw }}
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>


          <div class="row mt-3">
            <div class="col-12">
              <h5>{{ Controller.l('newRecipe_chapter5_header') }}</h5>
            </div>
          </div>
          <div class="row mt-2">
            <div class="col-12">
              <div class="form-row">
                <div class="form-group col-12 col-lg-6">
                  <label for="recipe-sourcetext" class="col-form-label-sm">
                    <b>{{ Controller.l('newRecipe_chapter1_recipeSourceText') }}</b><br />
                    <span class="text-muted text-small">{{ Controller.l('newRecipe_chapter1_recipeSourceTextDescription') }}</span>
                  </label>
                  <input class="form-control form-control-sm" type="text" id="recipe-sourcetext" name="sourceText"
                    placeholder="{{ Controller.l('newRecipe_chapter1_recipeSourceTextPlaceholder') }}">
                </div>
                <div class="form-group col-12 col-lg-6">
                  <label for="recipe-sourceurl" class="col-form-label-sm">
                    <b>{{ Controller.l('newRecipe_chapter1_recipeSourceUrl') }}</b><br />
                    <span class="text-muted text-small">{{ Controller.l('newRecipe_chapter1_recipeSourceUrlDescription') }}</span>
                  </label>
                  <input class="form-control form-control-sm" type="url" id="recipe-sourceurl" name="sourceUrl"
                    placeholder="{{ Controller.l('newRecipe_chapter1_recipeSourceUrlPlaceholder') }}">
                </div>
              </div>
              <div class="form-row">
                <div class="form-group col-12 col-lg-6">
                  <label for="recipe-tags" class="col-form-label-sm">
                    <b>{{ Controller.l('newRecipe_chapter1_recipeTags') }}</b><br />
                    <span class="text-muted text-small">{{ Controller.l('newRecipe_chapter1_recipeTagsDescription') }}</span>
                  </label>
                  <select class="form-control form-select2-multi form-control-sm text-small" name="tags[]"
                     multiple id="recipe-tags"
                    title="{{ Controller.l('newRecipe_chapter1_recipeTagsSelect') }}">{% for Tag in Tags %}
                    <option value="{{ Tag.getName() }}">{{ Tag.getName() }}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>
            </div>
          </div>
          <button class="btn btn-blue" type="submit">{{ Controller.l('newRecipe_submitButton_title') }}</button>
        </b-form>

        <div class="modal fade" id="new-recipe-modal"
          data-backdrop="static" data-keyboard="false" tabindex="-1"
          aria-labelledby="new-recipe-modal-title" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="new-recipe-modal-title">{{ Controller.l('newRecipe_modal_title') }}</h5>
              </div>
              <div class="modal-body" id="new-recipe-modal-description">
                {{ Controller.l('newRecipe_modal_description') }}
              </div>
              <div class="modal-body bg-warning d-none" id="new-recipe-modal-error">
                {{ Controller.l('newRecipe_modal_error')|raw }}
              </div>
              <div class="modal-body bg-success text-light d-none" id="new-recipe-modal-success">
                {{ Controller.l('newRecipe_modal_success')|raw }}
              </div>
              <div class="modal-footer">
                <button type="button" id="new-recipe-modal-spinner" class="btn btn-blue" disabled>{{ Config.Icons.Spinner('fa-fw fa-pulse')|raw }}</button>
                <button type="button" id="new-recipe-modal-close" class="btn btn-blue d-none" data-dismiss="modal">{{ Controller.l('newRecipe_modal_backButton') }}</button>
                <button type="button" id="new-recipe-modal-new" class="btn btn-outline-blue d-none" data-dismiss="modal">{{ Controller.l('newRecipe_modal_newButton') }}</button>
                <button type="button" id="new-recipe-modal-forward" class="btn btn-success d-none" data-dismiss="modal">{{ Controller.l('newRecipe_modal_forwardButton') }}</button>
              </div>
            </div>
          </div>
        </div>

      </b-container>
    </template>
